<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.cafuc.mapper.DiscussMapper">
    
    <resultMap id="DiscussResultMap" type="com.cafuc.pojo.Discuss">
        <id property="discussId" column="discuss_id"/>
        <result property="userId" column="user_id"/>
        <result property="userName" column="user_name"/>
        <result property="discussContent" column="discuss_content"/>
        <result property="discussDate" column="discuss_date"/>
    </resultMap>
    
    <!-- 添加评论 -->
    <insert id="addDiscuss" parameterType="com.cafuc.pojo.Discuss">
        INSERT INTO discuss (discuss_id, user_id, user_name, discuss_content, discuss_date)
        VALUES (#{discussId}, #{userId}, #{userName}, #{discussContent}, #{discussDate})
    </insert>
    
    <!-- 删除评论 -->
    <delete id="deleteDiscuss">
        DELETE FROM discuss WHERE discuss_id = #{discussId}
    </delete>
    
    <!-- 根据ID查询评论 -->
    <select id="getDiscussById" resultMap="DiscussResultMap">
        SELECT * FROM discuss WHERE discuss_id = #{discussId}
    </select>
    
    <!-- 查询所有评论 -->
    <select id="getAllDiscusses" resultMap="DiscussResultMap">
        SELECT * FROM discuss ORDER BY discuss_date DESC
    </select>
    
    <!-- 分页查询评论 -->
    <select id="getDiscussesByPage" resultMap="DiscussResultMap">
        SELECT * FROM discuss ORDER BY discuss_date DESC
        LIMIT #{start}, #{pageSize}
    </select>
    
    <!-- 获取评论总数 -->
    <select id="getDiscussCount" resultType="int">
        SELECT COUNT(*) FROM discuss
    </select>
    
</mapper>
